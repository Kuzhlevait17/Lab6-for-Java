# Лабораторная работа 6. Вариант 6. Выполняла: Кужлева Любовь ИТ-17-2024/ИКНТ/ЛА8-2024/ПР4-2024.

Данная работа разделена на 8 блоков, каждый из который реализован с помощью конструкции switch.
Каждое задание имеет полное описание для вывода на экран.
В классе Main6 реализована работа программы с дружественным интерфейсом.
В главном классе Main используется единственный метод класса Main6 для демонстрации работы программы.

# Основная часть

Блок 1: 
Аннотация Invoke.
Классы: Invoke, InvokeReflection, Kitty.

В данном задании была разработана аннотация @Invoke, предназначенная для автоматического вызова 
методов класса, помеченных этой аннотацией. Для реализации данной функциональности был создан 
класс InvokeReflection, использующий механизм рефлексии Java. Метод showInvoke принимает объект,
определяет его класс и перебирает все методы, объявленные в этом классе.
Для каждого метода проверяется наличие аннотации @Invoke. Если аннотация присутствует,
метод становится доступным для вызова через setAccessible(true) и выполняется с помощью Method.invoke.
В случае возникновения исключений при вызове метода, они перехватываются и 
выводится соответствующее сообщение в консоль, что обеспечивает устойчивость работы программы.

*Рефлексия в Java — это механизм, который позволяет разработчику вносить изменения и получать 
информацию о классах, интерфейсах, полях и методах во время выполнения, не зная их имен при этом. 
Reflection API также помогает создавать новые экземпляры классов, вызывать методы и получать или устанавливать значения полей. 

Блок 2:
Аннотация Default.
Классы: Default, DefaultReflection, Guns.

В данном задании была реализована обработка аннотации @Default, которая позволяет определить и вывести название класса,
указанного этой аннотацией. Для этого был создан класс DefaultReflection,
использующий механизм рефлексии для анализа переданного объекта.
Метод showDefault получает класс объекта, проверяет наличие над ним аннотации @Default и,
если она присутствует, выводит имя класса, указанного в свойстве value аннотации.
Если аннотация @Default отсутствует, метод выбрасывает исключение IllegalArgumentException 
с соответствующим сообщением, что обеспечивает контроль корректности использования аннотации.

Блок 3:
Аннотация ToString. 
Классы: ToString, ReflectionToString,Mode,OtherWeapon.

В рамках данного задания была реализована возможность формирования строкового представления
объекта с использованием аннотаций и механизма рефлексии. Для этого была создана аннотация @ToString, 
которая может применяться как к классам, так и к их полям. 
Аннотация имеет свойство value с типом Mode, где Mode.YES является значением по умолчанию и указывает, 
что поле или класс должно участвовать в формировании строкового представления, 
а Mode.NO позволяет исключить поле из вывода.
Основная задача метода showToString заключалась в том, чтобы с помощью рефлексии определить класс объекта, 
получить список его полей и проверить наличие аннотации @ToString как на классе, так и на каждом поле. 
После этого формируется строка с использованием StringBuilder,
в которую сначала добавляется имя класса, а затем значения всех полей, 
которые не помечены как Mode.NO. 
Для доступа к приватным полям используется метод setAccessible(true),
что позволяет корректно получить их значения даже при ограниченной видимости.
Если аннотация класса отсутствует или имеет значение Mode.YES, метод перебирает все поля,
проверяет аннотацию каждого поля и добавляет имя поля и его значение в результирующую строку,
пропуская только те поля, которые явно помечены как Mode.NO. В
результате формируется строковое представление объекта, включающее только необходимые данные.

Блок 4:
Аннотация Validate.
Классы: Validate, ValidateReflection, ShooterCopy,WeaponCopy.
В данном задании была разработана аннотация @Validate, предназначенная для указания классов,
с которыми должен быть связан проверяемый объект. Для обработки этой аннотации был создан 
класс ValidateReflection, использующий механизм рефлексии Java. 
Метод showValidation принимает объект, определяет его класс и проверяет наличие над ним аннотации @Validate.
Если аннотация отсутствует, метод выбрасывает исключение IllegalArgumentException с соответствующим сообщением. 
После этого метод получает массив классов, указанных в свойстве value аннотации. 
В случае если массив пустой, также выбрасывается исключение, так как аннотация должна содержать хотя бы один класс.
Далее метод перебирает указанные классы и выводит их названия в консоль.

Блок 5:
Аннотация Two.
Классы: Two, TwoReflection, Kitty.
В данном задании была разработана аннотация @Two,
которая позволяет хранить два значения над классом. 
Для обработки этой аннотации был создан класс TwoReflection, использующий механизм рефлексии Java. 
Метод ShowTwo принимает объект, определяет его класс и получает аннотацию @Two, если она присутствует над классом.
Далее метод извлекает из аннотации два значения — first и second — и выводит их в консоль.

Блок 6:
Аннотация Cache.
Классы: Cache, CacheReflection, ShooterCopy,WeaponCopy.
В данном задании была разработана аннотация @Cache, предназначенная для указания областей,
которые подлежат кэшированию, над классом объекта. Для обработки этой аннотации был создан 
класс CacheReflection, использующий механизм рефлексии Java. 
Метод showCache принимает объект, определяет его класс и проверяет наличие над ним аннотации @Cache.
Если аннотация отсутствует, метод выбрасывает исключение IllegalArgumentException с соответствующим сообщением. 
Далее метод извлекает список кэшируемых областей из свойства value аннотации. 
В случае если список пуст, также выбрасывается исключение, так как аннотация 
должна содержать хотя бы одну область. 
Если же список заполнен, метод выводит имена всех указанных областей в консоль.

Блок 7:
Тест аннотации toString().
Класс: TestToString.
В данном тестовом задании была проверена корректность работы метода showToString класса ToStringReflection,
отвечающего за формирование строкового представления объекта с учётом аннотации @ToString.
Тест проверяет несколько ключевых сценариев: поля, помеченные аннотацией @ToString
со свойством по умолчанию Mode.YES, должны отображаться в строковом представлении; 
поля, не помеченные аннотацией, также должны быть включены в вывод; 
поля с аннотацией @ToString и свойством Mode.NO должны быть исключены из вывода.
Для проверки работы метода создаётся объект класса OtherWeapon и вызывается showToString.
Вывод метода перенаправляется в ByteArrayOutputStream, чтобы его можно было проанализировать программно. 
Далее с помощью утверждений assertTrue и assertFalse проверяется, что корректные поля присутствуют в строке, 
а исключаемые поля отсутствуют. 

Блок 8:
Тест аннотации Validate().
Класс: TestValidate.
В данном тестовом задании была проверена работа метода showValidation класса ValidateReflection, 
который выводит имена классов, указанных в аннотации @Validate над объектом. 
Первый тест проверяет корректность работы метода при обычном использовании аннотации с заполненным массивом классов. 
Создаётся объект класса ShooterCopy, над которым указана аннотация @Validate, 
содержащая несколько классов. 
Метод showValidation выводит их имена в консоль,
и с помощью утверждений assertTrue проверяется, что все указанные классы присутствуют в выводе.
Второй тест проверяет корректность обработки некорректного использования аннотации — когда массив классов пуст. 
Для этого создаётся локальный класс с аннотацией @Validate, 
у которой массив value пустой.
При вызове метода showValidation ожидается выброс и
сключения IllegalArgumentException, что проверяется с помощью assertThrows.

# Тестирование.

Задание 1.
<img width="711" height="220" alt="image" src="https://github.com/user-attachments/assets/dc0cddc3-12e4-41fc-87c3-aeee06cde7db" />
<img width="1032" height="238" alt="image" src="https://github.com/user-attachments/assets/4d797e90-0099-4647-8a70-4b634eda1508" />

Задание 2.
<img width="636" height="624" alt="image" src="https://github.com/user-attachments/assets/4fa55312-b7e1-4f44-adba-6146c4382685" />
<img width="253" height="83" alt="image" src="https://github.com/user-attachments/assets/ad924ccd-6d0d-41a9-b773-10eda553f89c" />

Задание 3.
<img width="548" height="511" alt="image" src="https://github.com/user-attachments/assets/567e4e39-68bb-4968-9363-28bfe85bcfad" />
<img width="501" height="181" alt="image" src="https://github.com/user-attachments/assets/83ecbfbb-8fe8-4d64-b187-ccc285f1ee22" />

Задание 4.
<img width="767" height="269" alt="image" src="https://github.com/user-attachments/assets/516b0b13-f670-4339-8ae6-3a669e270665" />
<img width="558" height="172" alt="image" src="https://github.com/user-attachments/assets/b3c4adc3-5a5e-4e66-bf00-30f29861e0f7" />

Задание 5.
<img width="762" height="232" alt="image" src="https://github.com/user-attachments/assets/15a1faf5-6c40-4434-9cda-51de6f220d91" />
<img width="487" height="115" alt="image" src="https://github.com/user-attachments/assets/b154d051-955e-4039-a916-c015a8b8a872" />

Задание 6.
<img width="783" height="217" alt="image" src="https://github.com/user-attachments/assets/6a96b97c-b26c-419f-afae-98eea68777ef" />
<img width="529" height="133" alt="image" src="https://github.com/user-attachments/assets/0e68e169-96ad-4905-b784-bdd3bf895e94" />

Задание 7.
<img width="1221" height="394" alt="image" src="https://github.com/user-attachments/assets/72c66749-aa85-4fbf-993f-16ab86ff37cf" />

Задание 8.
<img width="1052" height="288" alt="image" src="https://github.com/user-attachments/assets/928d3846-83f4-4e78-a286-f265422ddac4" />
<img width="1091" height="397" alt="image" src="https://github.com/user-attachments/assets/08c59881-b6df-4b04-915e-b4545937af35" />

<img width="520" height="547" alt="image" src="https://github.com/user-attachments/assets/31bf8fe1-f0f9-4b38-aecc-34752b7d542a" />
<img width="500" height="296" alt="image" src="https://github.com/user-attachments/assets/f8ef945c-79f2-4947-97a2-72d48b384a1f" />
